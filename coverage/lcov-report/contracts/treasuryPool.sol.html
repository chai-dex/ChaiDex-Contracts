<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts/treasuryPool.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">contracts/</a> treasuryPool.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">61.29% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>19/31</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">17.24% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>10/58</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">46.15% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>6/13</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">59.52% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>25/42</span>
      </div>
    </div>
  </div>
  <div class='status-line medium'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// SPDX-License-Identifier: MIT
// CHAIDEX Version 1
pragma solidity ^0.8.4;
import "@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol";
import "@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol";
import "@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol";
import "@openzeppelin/contracts-upgradeable/token/ERC20/IERC20Upgradeable.sol";
import "@openzeppelin/contracts-upgradeable/security/PausableUpgradeable.sol";
import "@openzeppelin/contracts-upgradeable/token/ERC20/utils/SafeERC20Upgradeable.sol";
contract TreasuryPool is Initializable, UUPSUpgradeable,PausableUpgradeable, OwnableUpgradeable  {
using SafeERC20Upgradeable for IERC20Upgradeable;
<span class="fstat-no" title="function not covered" >function initialize() public initializer {</span>
<span class="cstat-no" title="statement not covered" >       __UUPSUpgradeable_init()</span>;
<span class="cstat-no" title="statement not covered" >       __Ownable_init()</span>;
<span class="cstat-no" title="statement not covered" >        __Pausable_init()</span>;
   }
/// @custom:oz-upgrades-unsafe-allow constructor
<span class="fstat-no" title="function not covered" >      constructor() {</span>
<span class="cstat-no" title="statement not covered" >        _disableInitializers()</span>;
    }
<span class="fstat-no" title="function not covered" >function _authorizeUpgrade(address newContract) internal override onlyOwner {}</span>
&nbsp;
&nbsp;
&nbsp;
 event Recieved(string USD,uint256 ID, address buyer, uint256 amount,uint256 balanceNew,uint256 UsdBalance); // upon recieve there should be a mint
&nbsp;
    event Redeemed(string USD, address redeemer, uint256 amount,uint256 balanceNew,uint256 USDbalance); // upon redeem there should be equal burn
&nbsp;
    mapping(uint8 =&gt; address) public USDStable; // same implementation as liquidity pool for multi token.
&nbsp;
    mapping(uint8 =&gt; string) public names; //name of token used
&nbsp;
        bool public Maxminted;
        bool public BuynatDisable;
        mapping(uint8=&gt;uint256) public TPbalanceUSD;
&nbsp;
&nbsp;
        uint256 public tPtotalBalance;
        uint256 public tPtotalBalanceNative;
&nbsp;
    /**
     * @dev Updates the address of the USD stable coins in the list
     */
<span class="fstat-no" title="function not covered" >function setMinter(bool _over)public onlyOwner whenNotPaused {</span>
Maxminted=_over;
}
function setDisable(bool _disable)public onlyOwner whenNotPaused {
BuynatDisable=_disable;
}
&nbsp;
&nbsp;
     function pause() public onlyOwner {
        _pause();
&nbsp;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function unpause() public onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >        _unpause()</span>;
    }
<span class="fstat-no" title="function not covered" >    function setUSDAddress (</span>
        uint8 _index,
        string memory _name,
        address _USD
    ) public onlyOwner whenNotPaused {
        USDStable[_index] = _USD;
        names[_index] = _name;
&nbsp;
    }
&nbsp;
    // Tracks any addition of funds to thee pool and emits event received
<span class="fstat-no" title="function not covered" >    function Buy(uint8 _usd, uint256 MintID,uint256 _amount) public whenNotPaused {</span>
<span class="cstat-no" title="statement not covered" >        require(_amount &gt; 0, "amount cannot be 0")</span>;
<span class="cstat-no" title="statement not covered" >        require (!Maxminted,"Maximum minting reached")</span>;
&nbsp;
&nbsp;
<span class="cstat-no" title="statement not covered" >        IERC20Upgradeable(USDStable[_usd]).safeTransferFrom(</span>
            msg.sender,
            address(this),
            _amount
        );
        TPbalanceUSD[_usd]+=_amount;
        tPtotalBalance += _amount;
<span class="cstat-no" title="statement not covered" >      emit Recieved(names[_usd],MintID, msg.sender, _amount,tPtotalBalance,TPbalanceUSD[_usd]);</span>
    }
     function BuyNat(uint256 MintID)public payable whenNotPaused {
     require(msg.value &gt; 0, "amount cannot be 0");
     <span class="missing-if-branch" title="else path not taken" >E</span>require (!Maxminted,"Maximum minting reached");
     require (!BuynatDisable,"Cannot buy using native coins anymore");
     string memory network="MATIC";
     tPtotalBalanceNative += msg.value;
     emit Recieved(network,MintID, msg.sender,msg.value,tPtotalBalance,tPtotalBalanceNative);
    }
&nbsp;
    /**
     * @dev Owner Authorizes the user's redeem request
     */
    // upon redeem the money is sent to them and equivalent inrc is burnt
   function Redeem(address redeemer,uint8 _usd, uint256 _amount) public onlyOwner whenNotPaused {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_amount &gt; 0, "amount cannot be 0");
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_amount&lt;=TPbalanceUSD[_usd]);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(redeemer !=address(0), "null");
        TPbalanceUSD[_usd]-=_amount;
         tPtotalBalance -= _amount;
&nbsp;
<span class="cstat-no" title="statement not covered" >        IERC20Upgradeable(USDStable[_usd]).safeTransfer(redeemer, _amount)</span>;
<span class="cstat-no" title="statement not covered" >         emit Redeemed(names[_usd], redeemer, _amount,tPtotalBalance,TPbalanceUSD[_usd]);</span>
    }
&nbsp;
     function RedeemNat(address redeemer, uint256 _amount) public payable onlyOwner whenNotPaused {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_amount &gt; 0, "amount cannot be 0");
        <span class="missing-if-branch" title="else path not taken" >E</span>require (!Maxminted,"Maximum minting reached");
         <span class="missing-if-branch" title="else path not taken" >E</span>require(redeemer !=address(0), "null");
        <span class="missing-if-branch" title="if path not taken" >I</span>require (!BuynatDisable,"Cannot buy using native coins anymore");
<span class="cstat-no" title="statement not covered" >        require(_amount&lt;=tPtotalBalanceNative)</span>;
        string memory network="MATIC";
        tPtotalBalanceNative -= _amount;
&nbsp;
        payable(redeemer).transfer(_amount);
        emit Redeemed(network, redeemer, _amount,tPtotalBalance,tPtotalBalanceNative);
    }
&nbsp;
    function getTPbalance(uint8 _length ) public view returns(uint256[] memory) {
     uint256[] memory Balances=new uint256[](_length);
for (uint8 i; i &lt;_length ; i++)
{
    Balances[i]= TPbalanceUSD[i];
}
return Balances;
&nbsp;
}
&nbsp;
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sun Feb 26 2023 11:43:44 GMT+0000 (Coordinated Universal Time)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
